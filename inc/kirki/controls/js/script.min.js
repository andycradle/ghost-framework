if(_.isUndefined(window.kirkiSetSettingValue)){({set(e,t){let i=this,a=wp.customize.settings.controls[e];if(_.isUndefined(a))return!0;switch(i.setValue(e,t),a.type){case"checkbox":case"kirki-toggle":t=1===t||"1"===t||!0===t,jQuery(i.findElement(e,"input")).prop("checked",t),wp.customize.instance(e).set(t);break;case"kirki-select":i.setSelectWoo(i.findElement(e,"select"),t);break;case"kirki-slider":jQuery(i.findElement(e,"input")).prop("value",t),jQuery(i.findElement(e,".kirki_range_value .value")).html(t);break;case"kirki-color":i.setColorPicker(i.findElement(e,".kirki-color-control"),t);break;case"kirki-repeater":break;case"kirki-custom":break;default:jQuery(i.findElement(e,"input")).prop("value",t);}},setColorPicker(e,t){e.attr("data-default-color",t).data("default-color",t).wpColorPicker("color",t)},setSelectWoo(e,t){jQuery(e).selectWoo().val(t).trigger("change")},setTextarea(e,t){jQuery(e).prop("value",t)},findElement(e,t){return wp.customize.control(e).container.find(t)},setValue(e,t,i){i=_.isUndefined(i)?100:parseInt(i,10),wp.customize.instance(e).set({}),setTimeout(()=>{wp.customize.instance(e).set(t)},i)}})}var kirki={initialized:!1,initialize(){const e=this;e.initialized||(e.initialized=!0)}};kirki.initialize();var kirki=kirki||{};kirki=jQuery.extend(kirki,{control:{"kirki-radio":{init(e){const t=this;t.template(e),kirki.input.radio.init(e)},template(e){const t=wp.template("kirki-input-radio");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,default:e.params.default,value:kirki.setting.get(e.id),choices:e.params.choices}))}},"kirki-color":{init(e){const t=this;t.template(e),kirki.input.color.init(e)},template(e){const t=wp.template("kirki-input-color");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,mode:e.params.mode,inputAttrs:e.params.inputAttrs,"data-palette":e.params.palette,"data-default-color":e.params.default,"data-alpha":e.params.choices.alpha,value:kirki.setting.get(e.id)}))}},"kirki-number":{init(e){const t=this;t.template(e),kirki.input.number.init(e)},template(e){const t=wp.template("kirki-input-number");let i={};e.container.html(t(i={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id)}))}},"kirki-image":{init(e){const t=this;t.template(e),kirki.input.image.init(e)},template(e){const t=wp.template("kirki-input-image");let i={};e.container.html(t(i={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id)}))}},"kirki-select":{init(e){const t=this;t.template(e),kirki.input.select.init(e)},template(e){const t=wp.template("kirki-input-select");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id),multiple:e.params.multiple||1,placeholder:e.params.placeholder}))}}}});var kirki=kirki||{};kirki=jQuery.extend(kirki,{input:{radio:{init(e){const t=jQuery(`input[data-id="${e.id}"]`);t.on("change keyup paste click",function(){kirki.setting.set(e.id,jQuery(this).val())})}},color:{init(e){let t,i=jQuery(`.kirki-color-control[data-id="${e.id}"]`);e.choices=e.choices||{},_.isEmpty(e.choices)&&e.params.choices&&(e.choices=e.params.choices),_.isEmpty(e.choices)||i.wpColorPicker(e.choices),setTimeout(()=>{t=jQuery(`.kirki-input-container[data-id="${e.id}"] .wp-picker-clear`),t.length&&t.click(()=>{kirki.setting.set(e.id,"")})},200),i.wpColorPicker({change(){setTimeout(()=>{kirki.setting.set(e.id,i.val())},20)}})}},genericInput:{init(e){const t=jQuery(`input[data-id="${e.id}"]`);t.on("change keyup paste click",function(){kirki.setting.set(e.id,jQuery(this).val())})}},textarea:{init(e){const t=jQuery(`textarea[data-id="${e.id}"]`);t.on("change keyup paste click",function(){kirki.setting.set(e.id,jQuery(this).val())})}},select:{init(e){let t,i=jQuery(`select[data-id="${e.id}"]`),a=parseInt(i.data("multiple"),10),n={escapeMarkup(e){return e}};e.params.placeholder&&(n.placeholder=e.params.placeholder,n.allowClear=!0),1<a&&(n.maximumSelectionLength=a),jQuery(i).selectWoo(n).on("change",function(){t=jQuery(this).val(),t=null===t&&1<a?[]:t,kirki.setting.set(e.id,t)})}},number:{init(e){let t,i,a=jQuery(`input[data-id="${e.id}"]`),n=e.setting._value;e.params.choices=_.defaults(e.params.choices,{min:0,max:100,step:1}),(isNaN(n)||""===n)&&(n=0>e.params.choices.min&&0<e.params.choices.max?0:e.params.choices.min),n=parseFloat(n),e.params.choices.step="any"===e.params.choices.step?.001:e.params.choices.step,e.params.choices.min=parseFloat(e.params.choices.min),e.params.choices.max=parseFloat(e.params.choices.max),e.params.choices.step=parseFloat(e.params.choices.step),t=jQuery(`.kirki-input-container[data-id="${e.id}"] .plus`),i=jQuery(`.kirki-input-container[data-id="${e.id}"] .minus`),t.click(()=>{let t,i=parseFloat(a.val());t=i>=e.params.choices.max?i:i+e.params.choices.step,a.val(t),a.trigger("change")}),i.click(()=>{let t,i=parseFloat(a.val());t=i<=e.params.choices.min?i:i-e.params.choices.step,a.val(t),a.trigger("change")}),a.on("change keyup paste click",function(){let t=jQuery(this).val();isNaN(t)&&(t=parseFloat(t,10),t=isNaN(t)?0:t,jQuery(this).attr("value",t)),kirki.setting.set(e.id,t)})}},image:{init(t){let i=kirki.setting.get(t.id),a=_.isUndefined(t.params.choices)||_.isUndefined(t.params.choices.save_as)?"url":t.params.choices.save_as,n=t.container.find(".placeholder, .thumbnail"),r="array"===a?i.url:i,s=t.container.find(".image-upload-remove-button"),d=t.container.find(".image-default-button");i="array"===a&&_.isString(i)?{url:i}:i,("id"===a||"ID"===a)&&""!==i&&wp.media.attachment(i).fetch().then(()=>{setTimeout(()=>{const e=wp.media.attachment(i).get("url");n.removeClass().addClass("thumbnail thumbnail-image").html(`<img src="${e}" alt="" />`)},700)}),("url"!==a||""===i)&&("array"!==a||_.isUndefined(i.url)||""===i.url)||t.container.find("image-default-button").hide(),("url"===a&&""===i||"array"===a&&(_.isUndefined(i.url)||""===i.url))&&s.hide(),i===t.params.default&&t.container.find("image-default-button").hide(),""!==r&&n.removeClass().addClass("thumbnail thumbnail-image").html(`<img src="${r}" alt="" />`),t.container.on("click",".image-upload-button",i=>{var e=wp.media({multiple:!1}).open().on("select",()=>{let i=e.state().get("selection").first(),r=i.toJSON(),o=r.url;_.isUndefined(r.sizes)||(o=r.sizes.full.url,_.isUndefined(r.sizes.medium)?!_.isUndefined(r.sizes.thumbnail)&&(o=r.sizes.thumbnail.url):o=r.sizes.medium.url),"array"===a?kirki.setting.set(t.id,{id:r.id,url:r.sizes.full.url,width:r.width,height:r.height}):"id"===a?kirki.setting.set(t.id,r.id):kirki.setting.set(t.id,_.isUndefined(r.sizes)?r.url:r.sizes.full.url),n.length&&n.removeClass().addClass("thumbnail thumbnail-image").html(`<img src="${o}" alt="" />`),s.length&&(s.show(),d.hide())});i.preventDefault()}),t.container.on("click",".image-upload-remove-button",i=>{let e,a,n;i.preventDefault(),kirki.setting.set(t.id,""),e=t.container.find(".placeholder, .thumbnail"),a=t.container.find(".image-upload-remove-button"),n=t.container.find(".image-default-button"),e.length&&e.removeClass().addClass("placeholder").html(kirkiL10n.noFileSelected),a.length&&(a.hide(),jQuery(n).hasClass("button")&&n.show())}),t.container.on("click",".image-default-button",i=>{let e,a,n;i.preventDefault(),kirki.setting.set(t.id,t.params.default),e=t.container.find(".placeholder, .thumbnail"),a=t.container.find(".image-upload-remove-button"),n=t.container.find(".image-default-button"),e.length&&e.removeClass().addClass("thumbnail thumbnail-image").html(`<img src="${t.params.default}" alt="" />`),a.length&&(a.show(),n.hide())})}}}});var kirki=kirki||{};kirki=jQuery.extend(kirki,{setting:{get(e){let t=e.split("["),a="",n=0,r="";return _.each(t,(e,t)=>{e=e.replace("]",""),0===t?a=e:a+=`[${e}]`,_.isUndefined(wp.customize.instance(a))||(r=wp.customize.instance(a).get(),n=t),n<t&&_.isObject(r)&&!_.isUndefined(r[e])&&(r=r[e])}),r},set(e,t,i){let a,n,r,s,d,o="",l="",c={};return a=e,_.isObject(e)&&(jQuery(e).attr("data-id")?a=e.attr("data-id"):a=e.parents("[data-id]").attr("data-id")),"undefined"==typeof wp.customize.control(a)?void(n=a.split("["),_.each(n,(e,t)=>{e=e.replace("]",""),o=0===t?e:`[${e}]`,_.isUndefined(wp.customize.instance(o))||(l=o,r=wp.customize.instance(l).get())}),s=a.replace(l,""),""===s?i&&(r=_.isObject(r)?r:{},r[i]=t,t=r):(!_.isObject(r)&&(r={}),"["===s.charAt(0)&&(s=s.replace("[","")),d=s.split("["),_.each(d,(e,t)=>{d[t]=e.replace("]","")}),i&&d.push(i),c=`{"${d.join("\":{\"")}":"${t}"${"}".repeat(d.length)}`,c=JSON.parse(c),jQuery.extend(!0,r,c),t=r),wp.customize.control(l).setting.set(t)):void wp.customize.control(a).setting.set(t)}}}),function(){wp.customize.kirkiDynamicControl=wp.customize.Control.extend({initialize(e,t){let i=this,a=t||{};a.params=a.params||{},a.params.content||(a.params.content=jQuery("<li></li>"),a.params.content.attr("id",`customize-control-${e.replace(/]/g,"").replace(/\[/g,"-")}`),a.params.content.attr("class",`customize-control customize-control-${a.params.type}`)),i.propertyElements=[],wp.customize.Control.prototype.initialize.call(i,e,a)},_setUpSettingRootLinks(){let e=this,t=e.container.find("[data-customize-setting-link]");t.each(function(){const t=jQuery(this);wp.customize(t.data("customizeSettingLink"),i=>{const a=new wp.customize.Element(t);e.elements.push(a),a.sync(i),a.set(i())})})},_setUpSettingPropertyLinks(){let e,t=this;t.setting&&(e=t.container.find("[data-customize-setting-property-link]"),e.each(function(){let e,i=jQuery(this),a=i.data("customizeSettingPropertyLink");e=new wp.customize.Element(i),t.propertyElements.push(e),e.set(t.setting()[a]),e.bind(e=>{let i=t.setting();e===i[a]||(i=_.clone(i),i[a]=e,t.setting.set(i))}),t.setting.bind(t=>{t[a]!==e.get()&&e.set(t[a])})}))},ready(){const e=this;e._setUpSettingRootLinks(),e._setUpSettingPropertyLinks(),wp.customize.Control.prototype.ready.call(e),e.deferred.embedded.done(()=>{e.initKirkiControl(e)})},embed(){let e=this,t=e.section();t&&wp.customize.section(t,t=>{"kirki-expanded"===t.params.type||t.expanded()||wp.customize.settings.autofocus.control===e.id?e.actuallyEmbed():t.expanded.bind(t=>{t&&e.actuallyEmbed()})})},actuallyEmbed(){const e=this;"resolved"===e.deferred.embedded.state()||(e.renderContent(),e.deferred.embedded.resolve())},focus(e){const t=this;t.actuallyEmbed(),wp.customize.Control.prototype.focus.call(t,e)},initKirkiControl(e){return"undefined"==typeof kirki.control[e.params.type]?void this.container.on("change keyup paste click","input",function(){e.setting.set(jQuery(this).val())}):void kirki.control[e.params.type].init(e)}})}(),_.each(kirki.control,(e,t)=>{wp.customize.controlConstructor[t]=wp.customize.kirkiDynamicControl.extend({})}),wp.customize.controlConstructor["kirki-dashicons"]=wp.customize.kirkiDynamicControl.extend({}),wp.customize.controlConstructor["kirki-editor"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl(){let e,t=this,i=t.container.find("textarea"),a=`kirki-editor-${t.id.replace("[","").replace("]","")}`;wp.editor.initialize(a,{tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0}),e=tinyMCE.get(a),e&&e.onChange.add(a=>{let n;a.save(),n=e.getContent(),i.val(n).trigger("change"),wp.customize.instance(t.id).set(n)})}}),wp.customize.controlConstructor["kirki-multicheck"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl(){const e=this;e.container.on("change","input",()=>{let t=[],a=0;jQuery.each(e.params.choices,i=>{e.container.find(`input[value="${i}"]`).is(":checked")?(e.container.find(`input[value="${i}"]`).parent().addClass("checked"),t[a]=i,a++):e.container.find(`input[value="${i}"]`).parent().removeClass("checked")}),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-multicolor"]=wp.customize.Control.extend({ready(){const e=this;!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(e):e.initKirkiControl()},initKirkiControl(){function e(e,t,i){let n=e.container.find(`.multicolor-index-${i}`),r={change(){setTimeout(()=>{e.saveValue(i,n.val()),e.container.find(`.multicolor-index-${i}`).trigger("change")},100)}};_.isObject(a.irisArgs)&&_.each(a.irisArgs,(e,t)=>{r[t]=e}),n.wpColorPicker(r)}let t=this,a=t.params.choices,n=Object.keys(a),r=this.params.value,s=0;for(;s<Object.keys(a).length;)e(this,r,n[s]),s++},saveValue(e,t){let i=this,a=i.container.find(".multicolor-hidden-value"),n=i.setting._value;n[e]=t,jQuery(a).attr("value",JSON.stringify(n)).trigger("change"),i.setting.set(n)}});const RepeaterRow=function(e,t,i,a){const n=this;this.rowIndex=e,this.container=t,this.label=i,this.header=this.container.find(".repeater-row-header"),this.header.on("click",()=>{n.toggleMinimize()}),this.container.on("click",".repeater-row-remove",()=>{n.remove()}),this.header.on("mousedown",()=>{n.container.trigger("row:start-dragging")}),this.container.on("keyup change","input, select, textarea",t=>{n.container.trigger("row:update",[n.rowIndex,jQuery(t.target).data("field"),t.target])}),this.setRowIndex=function(e){this.rowIndex=e,this.container.attr("data-row",e),this.container.data("row",e),this.updateLabel()},this.toggleMinimize=function(){this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")},this.remove=function(){this.container.slideUp(300,function(){jQuery(this).detach()}),this.container.trigger("row:remove",[this.rowIndex])},this.updateLabel=function(){let e,t,i;return"field"===this.label.type&&(e=this.container.find(`.repeater-field [data-field="${this.label.field}"]`),_.isFunction(e.val)&&(t=e.val(),""!==t))?(_.isUndefined(a.params.fields[this.label.field])||_.isUndefined(a.params.fields[this.label.field].type)||("select"===a.params.fields[this.label.field].type?!_.isUndefined(a.params.fields[this.label.field].choices)&&!_.isUndefined(a.params.fields[this.label.field].choices[e.val()])&&(t=a.params.fields[this.label.field].choices[e.val()]):("radio"===a.params.fields[this.label.field].type||"radio-image"===a.params.fields[this.label.field].type)&&(i=`${a.selector} [data-row="${this.rowIndex}"] .repeater-field [data-field="${this.label.field}"]:checked`,t=jQuery(i).val())),void this.header.find(".repeater-row-label").text(t)):void this.header.find(".repeater-row-label").text(`${this.label.value} ${this.rowIndex+1}`)},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready(){const e=this;!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(e):e.initKirkiControl()},initKirkiControl(){let t,i,a=this;const n=this.params.value;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.setValue([],!1),this.repeaterFieldsContainer=this.container.find(".repeater-fields").first(),this.currentIndex=0,this.rows=[],t=!1,_.isUndefined(this.params.choices.limit)||(t=!(0>=this.params.choices.limit)&&parseInt(this.params.choices.limit,10)),this.container.on("click","button.repeater-add",n=>{n.preventDefault(),!t||a.currentIndex<t?(i=a.addRow(),i.toggleMinimize(),a.initColorPicker(),a.initSelect(i)):jQuery(`${a.selector} .limit`).addClass("highlight")}),this.container.on("click",".repeater-row-remove",()=>{a.currentIndex--,(!t||a.currentIndex<t)&&jQuery(`${a.selector} .limit`).removeClass("highlight")}),this.container.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",function(t){t.preventDefault(),a.$thisButton=jQuery(this),a.openFrame(t)}),this.container.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(t){t.preventDefault(),a.$thisButton=jQuery(this),a.removeImage(t)}),this.container.on("click keypress",".repeater-field-upload .remove-button",function(t){t.preventDefault(),a.$thisButton=jQuery(this),a.removeFile(t)}),this.repeaterTemplate=_.memoize(()=>{let e,t={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(i){return e=_.template(a.container.find(".customize-control-repeater-content").first().html(),null,t),e(i)}}),n.length&&_.each(n,e=>{i=a.addRow(e),a.initColorPicker(),a.initSelect(i,e)}),this.setValue(n,!0,!0),this.repeaterFieldsContainer.sortable({handle:".repeater-row-header",update(){a.sort()}})},openFrame(e){wp.customize.utils.isKeydownButNotEnterEvent(e)||(this.$thisButton.closest(".repeater-field").hasClass("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open())},initFrame(){const e=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame(){let e=this.$thisButton.siblings("input.hidden-field").attr("data-field"),t=this.getMimeType();_.isString(e)&&""!==e&&_.isObject(this.params.fields[e])&&"cropped_image"===this.params.fields[e].type&&["width","height","flex_width","flex_height"].forEach(t=>{_.isUndefined(this.params.fields[e][t])||(this.params[t]=this.params.fields[e][t])}),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:t}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect(){const e=this.frame.state().get("selection").first().toJSON();this.$thisButton.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField(e):this.setImageInRepeaterField(e)},onSelectForCrop(){const e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(e)},onCropped(e){this.setImageInRepeaterField(e)},calculateImageSelectOptions(e,t){let i,a,n,r=t.get("control"),s=!!parseInt(r.params.flex_width,10),d=!!parseInt(r.params.flex_height,10),o=e.get("width"),l=e.get("height"),c=parseInt(r.params.width,10),p=parseInt(r.params.height,10),m=c/p,u=o,h=l;return t.set("canSkipCrop",!r.mustBeCropped(s,d,c,p,o,l)),u/h>m?(p=h,c=p*m):(c=u,p=c/m),i=(u-c)/2,a=(h-p)/2,n={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:o,imageHeight:l,x1:i,y1:a,x2:c+i,y2:p+a},!1==d&&!1===s&&(n.aspectRatio=`${c}:${p}`),!1==d&&(n.maxHeight=p),!1==s&&(n.maxWidth=c),n},mustBeCropped(e,t,i,a,n,r){return!(!0===e&&!0===t||!0===e&&a===r||!0===t&&i===n||i===n&&a===r||n<=i)},onSkippedCrop(){const e=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(e)},setImageInRepeaterField(e){const t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image");t.find(".kirki-image-attachment").html(`<img src="${e.url}">`).hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},setFileInRepeaterField(e){const t=this.$thisButton.closest(".repeater-field-upload");t.find(".kirki-file-attachment").html(`<span class="file"><span class="dashicons dashicons-media-default"></span> ${e.filename}</span>`).hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".upload-button").show(),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},getMimeType(){const e=this.$thisButton.siblings("input.hidden-field").attr("data-field");return _.isString(e)&&""!==e&&_.isObject(this.params.fields[e])&&"upload"===this.params.fields[e].type&&!_.isUndefined(this.params.fields[e].mime_type)?this.params.fields[e].mime_type:"image"},removeImage(e){let t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload"),i=t.find(".upload-button"),t.find(".kirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},removeFile(e){let t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(t=this.$thisButton.closest(".repeater-field-upload"),i=t.find(".upload-button"),t.find(".kirki-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},getValue(){return JSON.parse(decodeURI(this.setting.get()))},setValue(e,t,i){let a=e,n=[];i&&(jQuery.each(this.params.fields,(e,t)=>{("image"===t.type||"cropped_image"===t.type||"upload"===t.type)&&n.push(e)}),jQuery.each(e,(e,t)=>{jQuery.each(n,(i,n)=>{_.isUndefined(t[n])||_.isUndefined(t[n].id)||(a[e][n]=t[n].id)})})),this.setting.set(encodeURI(JSON.stringify(a))),t&&this.settingField.trigger("change")},addRow(e){let t,a,n,r=this,s=r.repeaterTemplate(),d=this.getValue(),o={};if(s){if(t=jQuery.extend(!0,{},r.params.fields),e)for(n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n].default=e[n]);for(n in t.index=this.currentIndex,s=s(t),a=new RepeaterRow(r.currentIndex,jQuery(s).appendTo(r.repeaterFieldsContainer),r.params.row_label,r),a.container.on("row:remove",(t,e)=>{r.deleteRow(e)}),a.container.on("row:update",(t,e,i,n)=>{r.updateField.call(r,t,e,i,n),a.updateLabel()}),this.rows[this.currentIndex]=a,t)t.hasOwnProperty(n)&&(o[n]=t[n].default);return d[this.currentIndex]=o,this.setValue(d,!0),this.currentIndex++,a}},sort(){let e=this,t=this.repeaterFieldsContainer.find(".repeater-row"),a=[],n=e.getValue(),r=[],s=[];t.each((e,t)=>{a.push(jQuery(t).data("row"))}),jQuery.each(a,(t,i)=>{r[t]=e.rows[i],r[t].setRowIndex(t),s[t]=n[i]}),e.rows=r,e.setValue(s)},deleteRow(e){let t,a,n,r=this.getValue();for(n in r[e]&&(t=this.rows[e],t&&(delete r[e],delete this.rows[e],this.setValue(r,!0))),a=1,this.rows)this.rows.hasOwnProperty(n)&&this.rows[n]&&(this.rows[n].updateLabel(),a++)},updateField(t,e,i,a){let n,r,s;this.rows[e]&&this.params.fields[i]&&(n=this.params.fields[i].type,r=this.rows[e],s=this.getValue(),a=jQuery(a),_.isUndefined(s[r.rowIndex][i])||(s[r.rowIndex][i]="checkbox"===n?a.is(":checked"):a.val(),this.setValue(s,!0)))},initColorPicker(){let e=this,t=e.container.find(".color-picker-hex"),i={},a=t.data("field");_.isUndefined(a)||_.isUndefined(e.params.fields[a])||_.isUndefined(e.params.fields[a].palettes)||!_.isObject(e.params.fields[a].palettes)||(i.palettes=e.params.fields[a].palettes),i.change=function(t,i){let a=jQuery(t.target),n=a.closest(".repeater-row"),r=n.data("row"),s=e.getValue();s[r][a.data("field")]=i.color.toString(),e.setValue(s,!0)},0!==t.length&&t.wpColorPicker(i)},initSelect(e,t){let i,a,n,r=this,s=e.container.find(".repeater-field select"),d={};0===s.length||(a=s.data("field"),n=jQuery(s).data("multiple"),"undefed"!==n&&jQuery.isNumeric(n)&&(n=parseInt(n,10),1<n&&(d.maximumSelectionLength=n)),t=t||{},t[a]=t[a]||"",i=jQuery(s).selectWoo(d).val(t[a]||jQuery(s).val()),this.container.on("change",".repeater-field select",function(e){let t=jQuery(e.target),i=t.closest(".repeater-row"),a=i.data("row"),n=r.getValue();n[a][t.data("field")]=jQuery(this).val(),r.setValue(n)}))}}),wp.customize.controlConstructor["kirki-slider"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl(){let e=this,t="postMessage"===e.setting.transport?"mousemove change":"change",i=e.container.find("input[type=\"range\"]"),a=e.container.find("input[type=\"text\"]"),n=e.setting._value;a.attr("value",n),i.on("mousemove change",()=>{a.attr("value",i.val())}),i.on(t,()=>{e.setting.set(i.val())}),a.on("input paste change",()=>{i.attr("value",a.val()),e.setting.set(a.val())}),e.container.find(".slider-reset").on("click",()=>{a.attr("value",e.params.default),i.attr("value",e.params.default),e.setting.set(a.val())})}}),wp.customize.controlConstructor["kirki-switch"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl(){let e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-toggle"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl(){let e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}});